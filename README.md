# Lucinda — телеграм бот для изучения английских слов
@englishVocabularyLucindaBot
## Идея
Этот телеграм бот поможет запомнить новые английские слова. 

Часто возникает проблема, что выученные слова быстро забываются. Поэтому вместо того, чтобы просто спрашивать у пользователся перевод английского слова, Lucinda присылает предложение с его использованием. 

Таким образом пользователь видит слово в контексте и ему проще его запомнить, проассоциировать с другими словами, понять особенности его использования. В дальнейшем, когда пользователь встретит выученное слово, ему будет легче его вспомнить.  
## Команды
* `/start` - описание бота
* `/help` - что умеет бот
* `/addwords` - добавить слова в свой словарь
* `/deletewords` - удалить слова из своего словаря
* `/printdict` - посмотреть свой словарь
* `/startlearning` - начать учить слова
* `/stop` - прервать текущую команду

## Как он работает
Бот написан на Python с использованием библиотеки [pyTelegramBotAPI](https://github.com/eternnoir/pyTelegramBotAPI).

Код программы с комментариями на английском языке находится в файле [bot.py](https://github.com/kornilova-l/telegram-bot-lucinda/blob/master/bot.py)

### Особенности
Для хранения словарей пользователей используется модуль *shelve*, который позволяет сохранять key — value пары в файл и обеспечивает взаимодействие с ними. Получается простая база данный, где key — это id пользователя, а value — его словарь.

Примеры предложений со словами, которые учит пользователь, бот получает используя [Twinword API](https://www.twinword.com/api/index.php)

### Добавление слов в словарь. Команда `/addwords`
Предположим, пользователь ввёл команду `/addwords`, а затем отправил боту слово *evidence - доказательство*

1. Бот записывает это слово в словарь пользователя
2. Бот проверяет, есть ли уже примеры со словом evidence в его базе примеров
3. Если примеров не обнаруживается, то он делает запрос к twinword с этим словом и получает ответ в формате json
4. Если запрос был корректный и в twinword есть примеры с этим словом, то бот записывает в базу примеров полученный список с предложениями, в которых есть слово evidence. 

  Пример такого списка:
  
  `['The evidence belies your statement.', 
  "The evidence invalidates the man's statement.", 
  'Was there evidence in the record that the victim was promiscuous ', 
  "The bulk of the evidence for the arrest warrant was Lawrence's statement."]`

Примеры предложений для слова добавляются в базу примеров 1 раз, когда пользователь добавляет слово в словарь. Это нужно для того, чтобы не делать запросы к twinword каждый раз, когда пользователь учит слова.

Стоит отметить, что база примеров общая для всех. Так как у разных пользователей в их словарях могут быть одинаковые слова.

### Процесс изучения слов. Команда `/startlearning`

1. Бот проверяет, есть ли у пользователя в словаре слова. Если слов нет, то отправляет сообщение "your dictionary is empty"
2. Бот добавляет пользователя в список пользователей, которые сейчас учат слова (это необходимо делать, потому что иначе невозможно определить к какой команде относится следующее сообщение пользователя /addwords /deletewords или /startlearning) 
3. Бот выбирает случайное слово из словаря, ищет предложение с этим словом в базе примеров и отправляет его (если примера со словом нет, то бот оправляет само слово)
4. Бот запоминает отправленное слово, чтобы потом проверить ответ пользователя.
